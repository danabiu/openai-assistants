(()=>{var e={};e.id=811,e.ids=[811],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},7561:e=>{"use strict";e.exports=require("node:fs")},9411:e=>{"use strict";e.exports=require("node:path")},7742:e=>{"use strict";e.exports=require("node:process")},4492:e=>{"use strict";e.exports=require("node:stream")},1041:e=>{"use strict";e.exports=require("node:url")},1017:e=>{"use strict";e.exports=require("path")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},1267:e=>{"use strict";e.exports=require("worker_threads")},9796:e=>{"use strict";e.exports=require("zlib")},8249:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>h,tree:()=>c});var a=s(482),r=s(9108),n=s(2563),i=s.n(n),o=s(8300),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(t,l);let c=["",{children:["examples",{children:["function-calling",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,6851)),"/workspaces/openai-assistants/app/examples/function-calling/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,7904)),"/workspaces/openai-assistants/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9361,23)),"next/dist/client/components/not-found-error"]}],d=["/workspaces/openai-assistants/app/examples/function-calling/page.tsx"],u="/examples/function-calling/page",p={require:s,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/examples/function-calling/page",pathname:"/examples/function-calling",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},5194:(e,t,s)=>{Promise.resolve().then(s.bind(s,4169))},6351:(e,t,s)=>{Promise.resolve().then(s.bind(s,272))},9709:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2583,23)),Promise.resolve().then(s.t.bind(s,6840,23)),Promise.resolve().then(s.t.bind(s,8771,23)),Promise.resolve().then(s.t.bind(s,3225,23)),Promise.resolve().then(s.t.bind(s,9295,23)),Promise.resolve().then(s.t.bind(s,3982,23))},5619:(e,t,s)=>{"use strict";s.d(t,{Z:()=>h});var a=s(5344),r=s(3729),n=s(2207),i=s.n(n),o=s(3286),l=s(7627);let c=({text:e})=>a.jsx("div",{className:i().userMessage,children:e}),d=({text:e})=>a.jsx("div",{className:i().assistantMessage,children:a.jsx(l.U,{children:e})}),u=({text:e})=>a.jsx("div",{className:i().codeMessage,children:e.split("\n").map((e,t)=>(0,a.jsxs)("div",{children:[a.jsx("span",{children:`${t+1}. `}),e]},t))}),p=({role:e,text:t})=>{switch(e){case"user":return a.jsx(c,{text:t});case"assistant":return a.jsx(d,{text:t});case"code":return a.jsx(u,{text:t});default:return null}},h=({functionCallHandler:e=()=>Promise.resolve("")})=>{let[t,s]=(0,r.useState)(""),[n,l]=(0,r.useState)([]),[c,d]=(0,r.useState)(!1),[u,h]=(0,r.useState)(""),_=(0,r.useRef)(null),x=()=>{_.current?.scrollIntoView({behavior:"smooth"})};(0,r.useEffect)(()=>{x()},[n]),(0,r.useEffect)(()=>{(async()=>{let e=await fetch("/api/assistants/threads",{method:"POST"});h((await e.json()).threadId)})()},[]);let m=async e=>{let t=await fetch(`/api/assistants/threads/${u}/messages`,{method:"POST",body:JSON.stringify({content:e})});P(o.c.fromReadableStream(t.body))},g=async(e,t)=>{let s=await fetch(`/api/assistants/threads/${u}/actions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({runId:e,toolCallOutputs:t})});P(o.c.fromReadableStream(s.body))},w=()=>{q("assistant","")},y=e=>{null!=e.value&&N(e.value),null!=e.annotations&&C(e.annotations)},f=e=>{N(`
![${e.file_id}](/api/files/${e.file_id})
`)},v=e=>{"code_interpreter"==e.type&&q("code","")},j=(e,t)=>{"code_interpreter"==e.type&&e.code_interpreter.input&&N(e.code_interpreter.input)},S=async t=>{let s=t.data.id,a=t.data.required_action.submit_tool_outputs.tool_calls,r=await Promise.all(a.map(async t=>({output:await e(t),tool_call_id:t.id})));d(!0),g(s,r)},b=()=>{d(!1)},P=e=>{e.on("textCreated",w),e.on("textDelta",y),e.on("imageFileDone",f),e.on("toolCallCreated",v),e.on("toolCallDelta",j),e.on("event",e=>{"thread.run.requires_action"===e.event&&S(e),"thread.run.completed"===e.event&&b()})},N=e=>{l(t=>{let s=t[t.length-1],a={...s,text:s.text+e};return[...t.slice(0,-1),a]})},q=(e,t)=>{l(s=>[...s,{role:e,text:t}])},C=e=>{l(t=>{let s={...t[t.length-1]};return e.forEach(e=>{"file_path"===e.type&&(s.text=s.text.replaceAll(e.text,`/api/files/${e.file_path.file_id}`))}),[...t.slice(0,-1),s]})};return(0,a.jsxs)("div",{className:i().chatContainer,children:[(0,a.jsxs)("div",{className:i().messages,children:[n.map((e,t)=>a.jsx(p,{role:e.role,text:e.text},t)),a.jsx("div",{ref:_})]}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t.trim()&&(m(t),l(e=>[...e,{role:"user",text:t}]),s(""),d(!0),x())},className:`${i().inputForm} ${i().clearfix}`,children:[a.jsx("input",{type:"text",className:i().input,value:t,onChange:e=>s(e.target.value),placeholder:"Env\xeda un mensaje al Asistente de Tecnoiglesia"}),a.jsx("button",{type:"submit",className:i().button,disabled:c,children:"Enviar"})]})]})}},4169:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var a=s(5344),r=s(3729),n=s(8042),i=s.n(n);let o="";""===o&&(o=process.env.OPENAI_ASSISTANT_ID);let l=()=>{let[e,t]=(0,r.useState)(!1),[s,n]=(0,r.useState)(""),l=async()=>{t(!0);let e=await fetch("/api/assistants",{method:"POST"});n((await e.json()).assistantId),t(!1)};return a.jsx(a.Fragment,{children:!o&&(0,a.jsxs)("div",{className:i().container,children:[a.jsx("h1",{children:"Start by creating your assistant"}),(0,a.jsxs)("div",{className:i().message,children:["Create an assistant and set its ID in"," ",a.jsx("span",{children:"app/assistant-config.ts"})]}),s?a.jsx("div",{className:i().result,children:s}):a.jsx("button",{onClick:l,disabled:e,className:i().button,children:e?"Loading...":"Create Assistant"})]})})}},6466:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var a=s(5344);s(3729);var r=s(2480),n=s.n(r);let i=({location:e="---",temperature:t="---",conditions:s="Sunny",isEmpty:r=!1})=>{let i={Cloudy:n().weatherBGCloudy,Sunny:n().weatherBGSunny,Rainy:n().weatherBGRainy,Snowy:n().weatherBGSnowy,Windy:n().weatherBGWindy};if(r)return a.jsx("div",{className:`${n().weatherWidget} ${n().weatherEmptyState}`,children:(0,a.jsxs)("div",{className:n().weatherWidgetData,children:[a.jsx("p",{children:"Enter a city to see local weather"}),a.jsx("p",{children:"try: what's the weather like in Berkeley?"})]})});let o=`${n().weatherWidget} ${i[s]||n().weatherBGSunny}`;return a.jsx("div",{className:o,children:(0,a.jsxs)("div",{className:n().weatherWidgetData,children:[a.jsx("p",{children:e}),a.jsx("h2",{children:"---"!==t?`${t}\xb0F`:t}),a.jsx("p",{children:s})]})})}},272:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var a=s(5344),r=s(3729),n=s(3223),i=s.n(n),o=s(5619),l=s(6466),c=s(6827);let d=()=>{let[e,t]=(0,r.useState)({}),s=0===Object.keys(e).length,n=async e=>{if(e?.function?.name!=="get_weather")return;let s=JSON.parse(e.function.arguments),a=(0,c.p)(s.location);return t(a),JSON.stringify(a)};return a.jsx("main",{className:i().main,children:(0,a.jsxs)("div",{className:i().container,children:[a.jsx("div",{className:i().column,children:a.jsx(l.Z,{location:e.location||"---",temperature:e.temperature?.toString()||"---",conditions:e.conditions||"Sunny",isEmpty:s})}),a.jsx("div",{className:i().chatContainer,children:a.jsx("div",{className:i().chat,children:a.jsx(o.Z,{functionCallHandler:n})})})]})})}},6827:(e,t,s)=>{"use strict";s.d(t,{p:()=>a});let a=e=>({location:e,temperature:Math.floor(31*Math.random())+50,unit:"F",conditions:["Cloudy","Sunny","Rainy","Snowy","Windy"][Math.floor(5*Math.random())]})},2207:e=>{e.exports={chatContainer:"chat_chatContainer__uCE53",inputForm:"chat_inputForm__mfg3w",input:"chat_input__hTFIv",button:"chat_button__XH0Gl",messages:"chat_messages__C__xG",userMessage:"chat_userMessage__xLvbe",assistantMessage:"chat_assistantMessage__rdpnJ",codeMessage:"chat_codeMessage__djeQF"}},8042:e=>{e.exports={container:"warnings_container__xY6e_",empty:"warnings_empty__Qx4Jn",assistantId:"warnings_assistantId__uhEAP",button:"warnings_button__oqV9n",result:"warnings_result__otq4F",message:"warnings_message__2bVYd"}},2480:e=>{e.exports={weatherBGCloudy:"weather-widget_weatherBGCloudy__H3Kqr",weatherBGSunny:"weather-widget_weatherBGSunny__ZFIos",weatherBGRainy:"weather-widget_weatherBGRainy__QkdwA",weatherBGSnowy:"weather-widget_weatherBGSnowy__BF2D8",weatherBGWindy:"weather-widget_weatherBGWindy__cWEUc",weatherWidget:"weather-widget_weatherWidget__hPcO_",weatherWidgetData:"weather-widget_weatherWidgetData__CO31V",weatherEmptyState:"weather-widget_weatherEmptyState__F3tuD"}},3223:e=>{e.exports={main:"page_main__W96mf",container:"page_container__vcKa0",column:"page_column__HrDyV",chatContainer:"page_chatContainer__HKjVa",chat:"page_chat__XHYAQ"}},6795:(e,t,s)=>{"use strict";s.d(t,{B:()=>a});let a="";""===a&&(a=process.env.OPENAI_ASSISTANT_ID)},6851:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>r,default:()=>i});let a=(0,s(6843).createProxy)(String.raw`/workspaces/openai-assistants/app/examples/function-calling/page.tsx`),{__esModule:r,$$typeof:n}=a,i=a.default},7904:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p,metadata:()=>u});var a=s(5036),r=s(8592),n=s.n(r);s(7272);let i=(0,s(6843).createProxy)(String.raw`/workspaces/openai-assistants/app/components/warnings.tsx`),{__esModule:o,$$typeof:l}=i,c=i.default;var d=s(6795);let u={title:"Asistente Tecnoiglesia - IA",description:"Una inteligencia artificial por Tecnoiglesia",icons:{icon:"/openai.svg"}};function p({children:e}){return a.jsx("html",{lang:"en",children:(0,a.jsxs)("body",{className:n().className,children:[d.B?e:a.jsx(c,{}),a.jsx("img",{className:"logo",src:"/openai.svg",alt:"OpenAI Logo"})]})})}},7272:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[638,719,615],()=>s(8249));module.exports=a})();
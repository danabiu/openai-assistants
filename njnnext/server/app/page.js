(()=>{var e={};e.id=931,e.ids=[931],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},7561:e=>{"use strict";e.exports=require("node:fs")},9411:e=>{"use strict";e.exports=require("node:path")},7742:e=>{"use strict";e.exports=require("node:process")},4492:e=>{"use strict";e.exports=require("node:stream")},1041:e=>{"use strict";e.exports=require("node:url")},1017:e=>{"use strict";e.exports=require("path")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},1267:e=>{"use strict";e.exports=require("worker_threads")},9796:e=>{"use strict";e.exports=require("zlib")},4414:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>d,pages:()=>u,routeModule:()=>x,tree:()=>c});var a=s(482),r=s(9108),n=s(2563),i=s.n(n),o=s(8300),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(t,l);let c=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,751)),"/workspaces/openai-assistants/app/page.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,7904)),"/workspaces/openai-assistants/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9361,23)),"next/dist/client/components/not-found-error"]}],u=["/workspaces/openai-assistants/app/page.tsx"],d="/page",p={require:s,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},5194:(e,t,s)=>{Promise.resolve().then(s.bind(s,4169))},1727:(e,t,s)=>{Promise.resolve().then(s.bind(s,4302))},9709:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2583,23)),Promise.resolve().then(s.t.bind(s,6840,23)),Promise.resolve().then(s.t.bind(s,8771,23)),Promise.resolve().then(s.t.bind(s,3225,23)),Promise.resolve().then(s.t.bind(s,9295,23)),Promise.resolve().then(s.t.bind(s,3982,23))},5619:(e,t,s)=>{"use strict";s.d(t,{Z:()=>x});var a=s(5344),r=s(3729),n=s(2207),i=s.n(n),o=s(3286),l=s(7627);let c=({text:e})=>a.jsx("div",{className:i().userMessage,children:e}),u=({text:e})=>a.jsx("div",{className:i().assistantMessage,children:a.jsx(l.U,{children:e})}),d=({text:e})=>a.jsx("div",{className:i().codeMessage,children:e.split("\n").map((e,t)=>(0,a.jsxs)("div",{children:[a.jsx("span",{children:`${t+1}. `}),e]},t))}),p=({role:e,text:t})=>{switch(e){case"user":return a.jsx(c,{text:t});case"assistant":return a.jsx(u,{text:t});case"code":return a.jsx(d,{text:t});default:return null}},x=({functionCallHandler:e=()=>Promise.resolve("")})=>{let[t,s]=(0,r.useState)(""),[n,l]=(0,r.useState)([]),[c,u]=(0,r.useState)(!1),[d,x]=(0,r.useState)(""),m=(0,r.useRef)(null),_=()=>{m.current?.scrollIntoView({behavior:"smooth"})};(0,r.useEffect)(()=>{_()},[n]),(0,r.useEffect)(()=>{(async()=>{let e=await fetch("/api/assistants/threads",{method:"POST"});x((await e.json()).threadId)})()},[]);let h=async e=>{let t=await fetch(`/api/assistants/threads/${d}/messages`,{method:"POST",body:JSON.stringify({content:e})});w(o.c.fromReadableStream(t.body))},g=async(e,t)=>{let s=await fetch(`/api/assistants/threads/${d}/actions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({runId:e,toolCallOutputs:t})});w(o.c.fromReadableStream(s.body))},v=()=>{N("assistant","")},f=e=>{null!=e.value&&S(e.value),null!=e.annotations&&A(e.annotations)},j=e=>{S(`
![${e.file_id}](/api/files/${e.file_id})
`)},b=e=>{"code_interpreter"==e.type&&N("code","")},y=(e,t)=>{"code_interpreter"==e.type&&e.code_interpreter.input&&S(e.code_interpreter.input)},P=async t=>{let s=t.data.id,a=t.data.required_action.submit_tool_outputs.tool_calls,r=await Promise.all(a.map(async t=>({output:await e(t),tool_call_id:t.id})));u(!0),g(s,r)},q=()=>{u(!1)},w=e=>{e.on("textCreated",v),e.on("textDelta",f),e.on("imageFileDone",j),e.on("toolCallCreated",b),e.on("toolCallDelta",y),e.on("event",e=>{"thread.run.requires_action"===e.event&&P(e),"thread.run.completed"===e.event&&q()})},S=e=>{l(t=>{let s=t[t.length-1],a={...s,text:s.text+e};return[...t.slice(0,-1),a]})},N=(e,t)=>{l(s=>[...s,{role:e,text:t}])},A=e=>{l(t=>{let s={...t[t.length-1]};return e.forEach(e=>{"file_path"===e.type&&(s.text=s.text.replaceAll(e.text,`/api/files/${e.file_path.file_id}`))}),[...t.slice(0,-1),s]})};return(0,a.jsxs)("div",{className:i().chatContainer,children:[(0,a.jsxs)("div",{className:i().messages,children:[n.map((e,t)=>a.jsx(p,{role:e.role,text:e.text},t)),a.jsx("div",{ref:m})]}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t.trim()&&(h(t),l(e=>[...e,{role:"user",text:t}]),s(""),u(!0),_())},className:`${i().inputForm} ${i().clearfix}`,children:[a.jsx("input",{type:"text",className:i().input,value:t,onChange:e=>s(e.target.value),placeholder:"Env\xeda un mensaje al Asistente de Tecnoiglesia"}),a.jsx("button",{type:"submit",className:i().button,disabled:c,children:"Enviar"})]})]})}},4169:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var a=s(5344),r=s(3729),n=s(8042),i=s.n(n);let o="";""===o&&(o=process.env.OPENAI_ASSISTANT_ID);let l=()=>{let[e,t]=(0,r.useState)(!1),[s,n]=(0,r.useState)(""),l=async()=>{t(!0);let e=await fetch("/api/assistants",{method:"POST"});n((await e.json()).assistantId),t(!1)};return a.jsx(a.Fragment,{children:!o&&(0,a.jsxs)("div",{className:i().container,children:[a.jsx("h1",{children:"Start by creating your assistant"}),(0,a.jsxs)("div",{className:i().message,children:["Create an assistant and set its ID in"," ",a.jsx("span",{children:"app/assistant-config.ts"})]}),s?a.jsx("div",{className:i().result,children:s}):a.jsx("button",{onClick:l,disabled:e,className:i().button,children:e?"Loading...":"Create Assistant"})]})})}},4302:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var a=s(5344);s(3729);var r=s(9107),n=s.n(r),i=s(5619);let o=()=>a.jsx("main",{className:n().main,children:a.jsx("div",{className:n().container,children:a.jsx(i.Z,{})})})},2207:e=>{e.exports={chatContainer:"chat_chatContainer__uCE53",inputForm:"chat_inputForm__mfg3w",input:"chat_input__hTFIv",button:"chat_button__XH0Gl",messages:"chat_messages__C__xG",userMessage:"chat_userMessage__xLvbe",assistantMessage:"chat_assistantMessage__rdpnJ",codeMessage:"chat_codeMessage__djeQF"}},8042:e=>{e.exports={container:"warnings_container__xY6e_",empty:"warnings_empty__Qx4Jn",assistantId:"warnings_assistantId__uhEAP",button:"warnings_button__oqV9n",result:"warnings_result__otq4F",message:"warnings_message__2bVYd"}},9107:e=>{e.exports={main:"page_main__nw1Wk",container:"page_container__jZF7q"}},6795:(e,t,s)=>{"use strict";s.d(t,{B:()=>a});let a="";""===a&&(a=process.env.OPENAI_ASSISTANT_ID)},7904:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p,metadata:()=>d});var a=s(5036),r=s(8592),n=s.n(r);s(7272);let i=(0,s(6843).createProxy)(String.raw`/workspaces/openai-assistants/app/components/warnings.tsx`),{__esModule:o,$$typeof:l}=i,c=i.default;var u=s(6795);let d={title:"Asistente Tecnoiglesia - IA",description:"Una inteligencia artificial por Tecnoiglesia",icons:{icon:"/openai.svg"}};function p({children:e}){return a.jsx("html",{lang:"en",children:(0,a.jsxs)("body",{className:n().className,children:[u.B?e:a.jsx(c,{}),a.jsx("img",{className:"logo",src:"/openai.svg",alt:"OpenAI Logo"})]})})}},751:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>r,default:()=>i});let a=(0,s(6843).createProxy)(String.raw`/workspaces/openai-assistants/app/page.tsx`),{__esModule:r,$$typeof:n}=a,i=a.default},7272:()=>{}};var t=require("../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[638,719,615],()=>s(4414));module.exports=a})();
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[811],{8117:function(e,t,a){Promise.resolve().then(a.bind(a,8809))},819:function(e,t,a){"use strict";var n=a(7437),s=a(2265),r=a(1438),i=a.n(r),c=a(8165),l=a(6566);let o=e=>{let{text:t}=e;return(0,n.jsx)("div",{className:i().userMessage,children:t})},d=e=>{let{text:t}=e;return(0,n.jsx)("div",{className:i().assistantMessage,children:(0,n.jsx)(l.U,{children:t})})},u=e=>{let{text:t}=e;return(0,n.jsx)("div",{className:i().codeMessage,children:t.split("\n").map((e,t)=>(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{children:"".concat(t+1,". ")}),e]},t))})},h=e=>{let{role:t,text:a}=e;switch(t){case"user":return(0,n.jsx)(o,{text:a});case"assistant":return(0,n.jsx)(d,{text:a});case"code":return(0,n.jsx)(u,{text:a});default:return null}};t.Z=e=>{let{functionCallHandler:t=()=>Promise.resolve("")}=e,[a,r]=(0,s.useState)(""),[l,o]=(0,s.useState)([]),[d,u]=(0,s.useState)(!1),[_,m]=(0,s.useState)(""),p=(0,s.useRef)(null),w=()=>{var e;null===(e=p.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})};(0,s.useEffect)(()=>{w()},[l]),(0,s.useEffect)(()=>{(async()=>{let e=await fetch("/api/assistants/threads",{method:"POST"});m((await e.json()).threadId)})()},[]);let y=async e=>{let t=await fetch("/api/assistants/threads/".concat(_,"/messages"),{method:"POST",body:JSON.stringify({content:e})});b(c.c.fromReadableStream(t.body))},x=async(e,t)=>{let a=await fetch("/api/assistants/threads/".concat(_,"/actions"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({runId:e,toolCallOutputs:t})});b(c.c.fromReadableStream(a.body))},f=()=>{G("assistant","")},g=e=>{null!=e.value&&B(e.value),null!=e.annotations&&E(e.annotations)},v=e=>{B("\n![".concat(e.file_id,"](/api/files/").concat(e.file_id,")\n"))},j=e=>{"code_interpreter"==e.type&&G("code","")},S=(e,t)=>{"code_interpreter"==e.type&&e.code_interpreter.input&&B(e.code_interpreter.input)},C=async e=>{let a=e.data.id,n=e.data.required_action.submit_tool_outputs.tool_calls,s=await Promise.all(n.map(async e=>({output:await t(e),tool_call_id:e.id})));u(!0),x(a,s)},N=()=>{u(!1)},b=e=>{e.on("textCreated",f),e.on("textDelta",g),e.on("imageFileDone",v),e.on("toolCallCreated",j),e.on("toolCallDelta",S),e.on("event",e=>{"thread.run.requires_action"===e.event&&C(e),"thread.run.completed"===e.event&&N()})},B=e=>{o(t=>{let a=t[t.length-1],n={...a,text:a.text+e};return[...t.slice(0,-1),n]})},G=(e,t)=>{o(a=>[...a,{role:e,text:t}])},E=e=>{o(t=>{let a={...t[t.length-1]};return e.forEach(e=>{"file_path"===e.type&&(a.text=a.text.replaceAll(e.text,"/api/files/".concat(e.file_path.file_id)))}),[...t.slice(0,-1),a]})};return(0,n.jsxs)("div",{className:i().chatContainer,children:[(0,n.jsxs)("div",{className:i().messages,children:[l.map((e,t)=>(0,n.jsx)(h,{role:e.role,text:e.text},t)),(0,n.jsx)("div",{ref:p})]}),(0,n.jsxs)("form",{onSubmit:e=>{e.preventDefault(),a.trim()&&(y(a),o(e=>[...e,{role:"user",text:a}]),r(""),u(!0),w())},className:"".concat(i().inputForm," ").concat(i().clearfix),children:[(0,n.jsx)("input",{type:"text",className:i().input,value:a,onChange:e=>r(e.target.value),placeholder:"Env\xeda un mensaje al Asistente de Tecnoiglesia"}),(0,n.jsx)("button",{type:"submit",className:i().button,disabled:d,children:"Enviar"})]})]})}},8407:function(e,t,a){"use strict";var n=a(7437);a(2265);var s=a(4027),r=a.n(s);t.Z=e=>{let{location:t="---",temperature:a="---",conditions:s="Sunny",isEmpty:i=!1}=e,c={Cloudy:r().weatherBGCloudy,Sunny:r().weatherBGSunny,Rainy:r().weatherBGRainy,Snowy:r().weatherBGSnowy,Windy:r().weatherBGWindy};if(i)return(0,n.jsx)("div",{className:"".concat(r().weatherWidget," ").concat(r().weatherEmptyState),children:(0,n.jsxs)("div",{className:r().weatherWidgetData,children:[(0,n.jsx)("p",{children:"Enter a city to see local weather"}),(0,n.jsx)("p",{children:"try: what's the weather like in Berkeley?"})]})});let l="".concat(r().weatherWidget," ").concat(c[s]||r().weatherBGSunny);return(0,n.jsx)("div",{className:l,children:(0,n.jsxs)("div",{className:r().weatherWidgetData,children:[(0,n.jsx)("p",{children:t}),(0,n.jsx)("h2",{children:"---"!==a?"".concat(a,"\xb0F"):a}),(0,n.jsx)("p",{children:s})]})})}},8809:function(e,t,a){"use strict";a.r(t);var n=a(7437),s=a(2265),r=a(9992),i=a.n(r),c=a(819),l=a(8407),o=a(3354);t.default=()=>{var e;let[t,a]=(0,s.useState)({}),r=0===Object.keys(t).length,d=async e=>{var t;if((null==e?void 0:null===(t=e.function)||void 0===t?void 0:t.name)!=="get_weather")return;let n=JSON.parse(e.function.arguments),s=(0,o.p)(n.location);return a(s),JSON.stringify(s)};return(0,n.jsx)("main",{className:i().main,children:(0,n.jsxs)("div",{className:i().container,children:[(0,n.jsx)("div",{className:i().column,children:(0,n.jsx)(l.Z,{location:t.location||"---",temperature:(null===(e=t.temperature)||void 0===e?void 0:e.toString())||"---",conditions:t.conditions||"Sunny",isEmpty:r})}),(0,n.jsx)("div",{className:i().chatContainer,children:(0,n.jsx)("div",{className:i().chat,children:(0,n.jsx)(c.Z,{functionCallHandler:d})})})]})})}},3354:function(e,t,a){"use strict";a.d(t,{p:function(){return n}});let n=e=>({location:e,temperature:Math.floor(31*Math.random())+50,unit:"F",conditions:["Cloudy","Sunny","Rainy","Snowy","Windy"][Math.floor(5*Math.random())]})},1438:function(e){e.exports={chatContainer:"chat_chatContainer__uCE53",inputForm:"chat_inputForm__mfg3w",input:"chat_input__hTFIv",button:"chat_button__XH0Gl",messages:"chat_messages__C__xG",userMessage:"chat_userMessage__xLvbe",assistantMessage:"chat_assistantMessage__rdpnJ",codeMessage:"chat_codeMessage__djeQF"}},4027:function(e){e.exports={weatherBGCloudy:"weather-widget_weatherBGCloudy__H3Kqr",weatherBGSunny:"weather-widget_weatherBGSunny__ZFIos",weatherBGRainy:"weather-widget_weatherBGRainy__QkdwA",weatherBGSnowy:"weather-widget_weatherBGSnowy__BF2D8",weatherBGWindy:"weather-widget_weatherBGWindy__cWEUc",weatherWidget:"weather-widget_weatherWidget__hPcO_",weatherWidgetData:"weather-widget_weatherWidgetData__CO31V",weatherEmptyState:"weather-widget_weatherEmptyState__F3tuD"}},9992:function(e){e.exports={main:"page_main__W96mf",container:"page_container__vcKa0",column:"page_column__HrDyV",chatContainer:"page_chatContainer__HKjVa",chat:"page_chat__XHYAQ"}}},function(e){e.O(0,[78,971,69,744],function(){return e(e.s=8117)}),_N_E=e.O()}]);